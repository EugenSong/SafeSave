<!DOCTYPE html>
<html>
<head>
  <title>Data Encryption Microservice</title>
</head>
<body>
<h1>Data Encryption Microservice</h1>
<form id="encryptionForm">
  <label for="noteTitle">Note Title:</label>
  <input type="text" id="noteTitle" name="noteTitle" required>
  <br><br>
  <label for="noteText">Note Text:</label>
  <input type="text" id="noteText" name="noteText" required>
  <br><br>
  <label for="noteCreatedDate">Note Created Date:</label>
  <input type="date" id="noteCreatedDate" name="noteCreatedDate" required>
  <br><br>
  <label for="noteUpdatedDate">Note Updated Date:</label>
  <input type="date" id="noteUpdatedDate" name="noteUpdatedDate" required>
  <br><br>
  <label for="noteAccessedDate">Note Accessed Date:</label>
  <input type="date" id="noteAccessedDate" name="noteAccessedDate" required>
  <br><br>
  <label for="userID">User ID:</label>
  <input type="number" id="userID" name="userID" required>
  <br><br>
  <label for="userHash">User Hash:</label>
  <input type="text" id="userHash" name="userHash" required>
  <br><br>
  <button type="button" id="encryptButton">Encrypt</button>
</form>
<br>
<div id="encryptedNoteTitle"></div>
<div id="encryptedNoteData"></div>
<div id="encryptedNoteCreated"></div>
<div id="encryptedNoteUpdated"></div>
<div id="encryptedNoteAccessed"></div>
<div id="unencryptedUserID"></div>
<div id="noteIV"></div>
<div id="key"></div>
<script>
  document.getElementById('encryptButton').addEventListener('click', () => {
    const noteTitle = document.getElementById('noteTitle').value;
    const noteText = document.getElementById('noteText').value;
    const noteCreatedDate = document.getElementById('noteCreatedDate').value;
    const noteUpdatedDate = document.getElementById('noteUpdatedDate').value;
    const noteAccessedDate = document.getElementById('noteAccessedDate').value;
    const userID = document.getElementById('userID').value;
    const userHash = document.getElementById('userHash').value;

    fetch('https://127.0.0.1:8002/ciphertext', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        noteTitle,
        noteText,
        noteCreatedDate,
        noteUpdatedDate,
        noteAccessedDate,
        userID,
        userHash,
      }),
    })
            .then(response => response.json())
            .then(data => {
              console.log("success")

              const encryptedNoteTitleDiv = document.getElementById('encryptedNoteTitle');
              encryptedNoteTitleDiv.innerHTML = `Encrypted Note Title: ${data.encryptedTitleData}`;

              const encryptedNoteDataDiv = document.getElementById('encryptedNoteData');
              encryptedNoteDataDiv.innerHTML = `Encrypted Note Text: ${data.encryptedNoteData}`;

              const encryptedNoteCreatedDiv = document.getElementById('encryptedNoteCreated');
              encryptedNoteCreatedDiv.innerHTML = `Encrypted Note Created Date: ${data.encryptednoteCreatedDate}`;

              const encryptedNoteUpdatedDiv = document.getElementById('encryptedNoteUpdated');
              encryptedNoteUpdatedDiv.innerHTML = `Encrypted Note Updated Date: ${data.encryptednoteUpdatedDate}`;

              const encryptedNoteAccessedDiv = document.getElementById('encryptedNoteAccessed');
              encryptedNoteAccessedDiv.innerHTML = `Encrypted Note Accessed: ${data.encryptednoteAccessedDate}`;

              const unencryptedUserID = document.getElementById('unencryptedUserID');
              unencryptedUserID.innerHTML = `Unencrypted User ID: ${userID}. This field is currently not encrypted due to database design.`;

              const ivDiv = document.getElementById('noteIV');
              ivDiv.innerHTML = `IV: ${data.iv}`

              document.getElementById('key').innerHTML = `Secret key: ${data.key}`

            })

            .catch(error => {
              console.error(error);
            });
  });
</script>
</body>
</html>
